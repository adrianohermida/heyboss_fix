import{c as k,j as t,d as b,r as m}from"./index-DsA75UDv.js";import{L as y}from"./loader-circle-D4tTIgnE.js";import{C as l}from"./circle-alert-DH38R448.js";/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],w=k("circle-check-big",S);function h(o,n={}){var a;(a=window.posthog)!=null&&a.capture&&window.posthog.capture(o,{event_id:crypto.randomUUID(),...n})}function j(o,n={}){window.fbq&&(["PageView","AddToCart","Purchase","InitiateCheckout"].includes(o)?window.fbq("track",o,n):window.fbq("trackCustom",o,n))}function x(o,n={}){window.gtag&&window.gtag("event",o,n)}function v(o,n={}){window.pintrk&&window.pintrk("track",o,n)}function C(o){const{orderId:n,value:a,currency:s,items:c}=o;h("Purchase",{order_id:n,value:a,currency:s,items:c}),c.forEach(e=>{h("Purchase_Item",{order_id:n,product_id:e.id,product_name:e.name,product_quantity:e.quantity,product_price:e.price})}),j("Purchase",{value:a,currency:s,transaction_id:n,contents:c.map(e=>({id:e.id,quantity:e.quantity,item_price:e.price})),content_type:"product"}),x("purchase",{transaction_id:n,value:a,currency:s,items:c.map(e=>({item_id:e.id,item_name:e.name,price:e.price,quantity:e.quantity}))}),v("checkout",{value:a,order_id:n,currency:s,line_items:c.map(e=>({product_id:e.id,product_quantity:e.quantity,product_price:e.price}))}),x("CompletePayment",{contents:c.map(e=>({content_id:e.id,content_name:e.name,quantity:e.quantity,price:e.price})),value:a,currency:s,order_id:n})}const N=({loading:o,error:n,purchaseData:a,onRetry:s})=>t.jsx("div",{"data-component-start":"11:2:339","data-component-end":"21:8:3053","data-component-path":"src\\react-app\\components\\Checkout\\CheckoutSuccessContent.tsx","data-component-file":"CheckoutSuccessContent.tsx","data-component-name":"div","data-component-class":"max-w-2xl w-full bg-white rounded-lg shadow-md p-8 text-center",className:"max-w-2xl w-full bg-white rounded-lg shadow-md p-8 text-center",children:o?t.jsxs("div",{"data-component-start":"13:6:445","data-component-end":"13:173:612","data-component-path":"src\\react-app\\components\\Checkout\\CheckoutSuccessContent.tsx","data-component-file":"CheckoutSuccessContent.tsx","data-component-name":"div","data-component-class":"text-center",className:"text-center",children:[t.jsx(y,{"data-component-start":"13:35:474","data-component-end":"13:108:547","data-component-path":"src\\react-app\\components\\Checkout\\CheckoutSuccessContent.tsx","data-component-file":"CheckoutSuccessContent.tsx","data-component-name":"Loader2","data-component-class":"h-12 w-12 animate-spin text-blue-600 mx-auto mb-4",className:"h-12 w-12 animate-spin text-blue-600 mx-auto mb-4"}),t.jsx("p",{"data-component-start":"13:108:547","data-component-end":"13:167:606","data-component-path":"src\\react-app\\components\\Checkout\\CheckoutSuccessContent.tsx","data-component-file":"CheckoutSuccessContent.tsx","data-component-name":"p","data-component-class":"text-gray-600",className:"text-gray-600",children:"Verificando informações..."})]}):n?t.jsxs(t.Fragment,{children:[t.jsx(l,{"data-component-start":"15:8:641","data-component-end":"15:71:704","data-component-path":"src\\react-app\\components\\Checkout\\CheckoutSuccessContent.tsx","data-component-file":"CheckoutSuccessContent.tsx","data-component-name":"AlertCircle","data-component-class":"h-16 w-16 text-red-500 mx-auto mb-4",className:"h-16 w-16 text-red-500 mx-auto mb-4"}),t.jsx("h1",{"data-component-start":"15:71:704","data-component-end":"15:145:778","data-component-path":"src\\react-app\\components\\Checkout\\CheckoutSuccessContent.tsx","data-component-file":"CheckoutSuccessContent.tsx","data-component-name":"h1","data-component-class":"text-2xl font-bold text-gray-900 mb-2",className:"text-2xl font-bold text-gray-900 mb-2",children:"Falha na Compra"}),t.jsx("div",{"data-component-start":"15:145:778","data-component-end":"15:287:920","data-component-path":"src\\react-app\\components\\Checkout\\CheckoutSuccessContent.tsx","data-component-file":"CheckoutSuccessContent.tsx","data-component-name":"div","data-component-class":"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:t.jsx("p",{"data-component-start":"15:214:847","data-component-end":"15:281:914","data-component-path":"src\\react-app\\components\\Checkout\\CheckoutSuccessContent.tsx","data-component-file":"CheckoutSuccessContent.tsx","data-component-name":"p","data-component-class":"text-red-600 text-sm",className:"text-red-600 text-sm",children:`Erro: ${n==null?void 0:n.message}`})}),t.jsx("button",{"data-component-start":"15:287:920","data-component-end":"15:428:1061","data-component-path":"src\\react-app\\components\\Checkout\\CheckoutSuccessContent.tsx","data-component-file":"CheckoutSuccessContent.tsx","data-component-name":"button","data-component-class":"bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700 transition-colors",onClick:s,className:"bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Tentar Novamente"})]}):a?t.jsxs(t.Fragment,{children:[t.jsx(w,{"data-component-start":"19:8:1345","data-component-end":"19:73:1410","data-component-path":"src\\react-app\\components\\Checkout\\CheckoutSuccessContent.tsx","data-component-file":"CheckoutSuccessContent.tsx","data-component-name":"CheckCircle","data-component-class":"h-16 w-16 text-green-500 mx-auto mb-4",className:"h-16 w-16 text-green-500 mx-auto mb-4"}),t.jsx("h1",{"data-component-start":"19:73:1410","data-component-end":"19:149:1486","data-component-path":"src\\react-app\\components\\Checkout\\CheckoutSuccessContent.tsx","data-component-file":"CheckoutSuccessContent.tsx","data-component-name":"h1","data-component-class":"text-2xl font-bold text-gray-900 mb-2",className:"text-2xl font-bold text-gray-900 mb-2",children:"Compra Realizada!"}),t.jsx("p",{"data-component-start":"19:149:1486","data-component-end":"19:239:1576","data-component-path":"src\\react-app\\components\\Checkout\\CheckoutSuccessContent.tsx","data-component-file":"CheckoutSuccessContent.tsx","data-component-name":"p","data-component-class":"text-gray-600 mb-6",className:"text-gray-600 mb-6",children:"Obrigado pela sua compra, seu pedido foi confirmado."}),a.products&&a.products.length>0?t.jsx("div",{"data-component-start":"19:301:1638","data-component-end":"19:1434:2771","data-component-path":"src\\react-app\\components\\Checkout\\CheckoutSuccessContent.tsx","data-component-file":"CheckoutSuccessContent.tsx","data-component-name":"div","data-component-class":"space-y-4",className:"space-y-4",children:t.jsxs("div",{"data-component-start":"19:328:1665","data-component-end":"19:1428:2765","data-component-path":"src\\react-app\\components\\Checkout\\CheckoutSuccessContent.tsx","data-component-file":"CheckoutSuccessContent.tsx","data-component-name":"div","data-component-class":"bg-gradient-to-br from-green-50 to-emerald-50 border border-green-200 rounded-xl p-6 shadow-sm",className:"bg-gradient-to-br from-green-50 to-emerald-50 border border-green-200 rounded-xl p-6 shadow-sm",children:[t.jsxs("h3",{"data-component-start":"19:440:1777","data-component-end":"19:596:1933","data-component-path":"src\\react-app\\components\\Checkout\\CheckoutSuccessContent.tsx","data-component-file":"CheckoutSuccessContent.tsx","data-component-name":"h3","data-component-class":"text-lg font-semibold text-green-800 mb-4",className:"text-lg font-semibold text-green-800 mb-4",children:["Seu Pedido (",a.products.length," item",a.products.length>1?"s":"",")"]}),t.jsx("div",{"data-component-start":"19:596:1933","data-component-end":"19:970:2307","data-component-path":"src\\react-app\\components\\Checkout\\CheckoutSuccessContent.tsx","data-component-file":"CheckoutSuccessContent.tsx","data-component-name":"div","data-component-class":"space-y-3 mb-6",className:"space-y-3 mb-6",children:a.products.map((c,e)=>t.jsx("div",{"data-component-start":"19:693:2030","data-component-end":"19:961:2298","data-component-path":"src\\react-app\\components\\Checkout\\CheckoutSuccessContent.tsx","data-component-file":"CheckoutSuccessContent.tsx","data-component-name":"div","data-component-map-start":"19:629:1966","data-component-map-end":"19:963:2300","data-component-class":"bg-white/60 rounded-lg p-4 border border-green-200",className:"bg-white/60 rounded-lg p-4 border border-green-200",children:t.jsx("div",{"data-component-start":"19:773:2110","data-component-end":"19:955:2292","data-component-path":"src\\react-app\\components\\Checkout\\CheckoutSuccessContent.tsx","data-component-file":"CheckoutSuccessContent.tsx","data-component-name":"div","data-component-class":"flex items-center justify-between",className:"flex items-center justify-between",children:t.jsx("div",{"data-component-start":"19:824:2161","data-component-end":"19:949:2286","data-component-path":"src\\react-app\\components\\Checkout\\CheckoutSuccessContent.tsx","data-component-file":"CheckoutSuccessContent.tsx","data-component-name":"div","data-component-class":"flex-1",className:"flex-1",children:t.jsx("h4",{"data-component-start":"19:848:2185","data-component-end":"19:943:2280","data-component-path":"src\\react-app\\components\\Checkout\\CheckoutSuccessContent.tsx","data-component-file":"CheckoutSuccessContent.tsx","data-component-name":"h4","data-component-class":"font-medium text-green-800",className:"font-medium text-green-800",children:c.productName||`Produto ${e+1}`})})})},e))}),t.jsxs("div",{"data-component-start":"19:970:2307","data-component-end":"19:1422:2759","data-component-path":"src\\react-app\\components\\Checkout\\CheckoutSuccessContent.tsx","data-component-file":"CheckoutSuccessContent.tsx","data-component-name":"div","data-component-class":"space-y-3",className:"space-y-3",children:[t.jsx("a",{"data-component-start":"19:997:2334","data-component-end":"19:1214:2551","data-component-path":"src\\react-app\\components\\Checkout\\CheckoutSuccessContent.tsx","data-component-file":"CheckoutSuccessContent.tsx","data-component-name":"a","data-component-class":"w-full bg-brand-primary text-white px-6 py-3 rounded-lg hover:bg-brand-primary/90 transition-colors flex items-center justify-center gap-2 no-underline font-medium",href:"/account",className:"w-full bg-brand-primary text-white px-6 py-3 rounded-lg hover:bg-brand-primary/90 transition-colors flex items-center justify-center gap-2 no-underline font-medium",children:"Ir para Meu Portal"}),t.jsx("a",{"data-component-start":"19:1214:2551","data-component-end":"19:1416:2753","data-component-path":"src\\react-app\\components\\Checkout\\CheckoutSuccessContent.tsx","data-component-file":"CheckoutSuccessContent.tsx","data-component-name":"a","data-component-class":"w-full bg-gray-200 text-gray-800 px-6 py-3 rounded-lg hover:bg-gray-300 transition-colors flex items-center justify-center gap-2 no-underline font-medium",href:"/",className:"w-full bg-gray-200 text-gray-800 px-6 py-3 rounded-lg hover:bg-gray-300 transition-colors flex items-center justify-center gap-2 no-underline font-medium",children:"Voltar para o Início"})]})]})}):null,t.jsx("div",{"data-component-start":"19:1443:2780","data-component-end":"19:1695:3032","data-component-path":"src\\react-app\\components\\Checkout\\CheckoutSuccessContent.tsx","data-component-file":"CheckoutSuccessContent.tsx","data-component-name":"div","data-component-class":"mt-8 pt-6 border-t border-gray-200",className:"mt-8 pt-6 border-t border-gray-200",children:a.checkoutSessionId&&t.jsx("div",{"data-component-start":"19:1531:2868","data-component-end":"19:1687:3024","data-component-path":"src\\react-app\\components\\Checkout\\CheckoutSuccessContent.tsx","data-component-file":"CheckoutSuccessContent.tsx","data-component-name":"div","data-component-class":"mb-4",className:"mb-4",children:t.jsxs("p",{"data-component-start":"19:1553:2890","data-component-end":"19:1681:3018","data-component-path":"src\\react-app\\components\\Checkout\\CheckoutSuccessContent.tsx","data-component-file":"CheckoutSuccessContent.tsx","data-component-name":"p","data-component-class":"text-sm font-mono text-gray-800 bg-gray-100 px-3 py-2 rounded border",className:"text-sm font-mono text-gray-800 bg-gray-100 px-3 py-2 rounded border",children:["Pedido: ",a.checkoutSessionId]})})})]}):t.jsxs(t.Fragment,{children:[t.jsx(l,{"data-component-start":"17:8:1101","data-component-end":"17:74:1167","data-component-path":"src\\react-app\\components\\Checkout\\CheckoutSuccessContent.tsx","data-component-file":"CheckoutSuccessContent.tsx","data-component-name":"AlertCircle","data-component-class":"h-16 w-16 text-yellow-500 mx-auto mb-4",className:"h-16 w-16 text-yellow-500 mx-auto mb-4"}),t.jsx("h1",{"data-component-start":"17:74:1167","data-component-end":"17:158:1251","data-component-path":"src\\react-app\\components\\Checkout\\CheckoutSuccessContent.tsx","data-component-file":"CheckoutSuccessContent.tsx","data-component-name":"h1","data-component-class":"text-2xl font-bold text-gray-900 mb-2",className:"text-2xl font-bold text-gray-900 mb-2",children:"Informação não encontrada"}),t.jsx("p",{"data-component-start":"17:158:1251","data-component-end":"17:228:1321","data-component-path":"src\\react-app\\components\\Checkout\\CheckoutSuccessContent.tsx","data-component-file":"CheckoutSuccessContent.tsx","data-component-name":"p","data-component-class":"text-gray-600",className:"text-gray-600",children:"Verifique se o sessionId está correto"})]})}),q=()=>{const[o]=b(),[n,a]=m.useState(!0),[s,c]=m.useState(null),[e,p]=m.useState(null),u=o.get("sessionId");m.useEffect(()=>{if(!u){p({message:"Missing sessionId parameter"}),a(!1);return}g(u)},[u]);const g=async f=>{try{a(!0);const i=await fetch(`/api/products/purchase-detail?sessionId=${f}`),d=await i.json();i.ok?(c(d),p(null),C&&C({orderId:d.checkoutSessionId,value:d.totalAmount,currency:d.currency,items:d.products.map(r=>({id:r.id,name:r.name,price:r.price,quantity:r.quantity}))})):p(d)}catch{p({message:"Network error, please try again later"})}finally{a(!1)}};return t.jsx("div",{"data-component-start":"60:4:1989","data-component-end":"62:10:2210","data-component-path":"src\\react-app\\pages\\CheckoutSuccessPage.tsx","data-component-file":"CheckoutSuccessPage.tsx","data-component-name":"div","data-component-class":"min-h-screen bg-gray-50 flex items-center justify-center",className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsx(N,{"data-component-start":"61:6:2071","data-component-end":"61:133:2198","data-component-path":"src\\react-app\\pages\\CheckoutSuccessPage.tsx","data-component-file":"CheckoutSuccessPage.tsx","data-component-name":"CheckoutSuccessContent",loading:n,error:e,purchaseData:s,onRetry:()=>window.location.reload()})})};export{q as default};
